<html>
<head>
  <!-- META DATA -->
	<meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Free Responsive Html5 Templates">
    <meta name="author" content="">

	<title>OpenHouse - Houses for Rent</title>
  
	<!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css"  type="text/css">
	
	<!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
	
	<link rel="stylesheet" href="css/lightbox.css">
	
	<!-- Custom Fonts -->
    <link rel="stylesheet" href="font-awesome-4.4.0/css/font-awesome.min.css"  type="text/css">
	<link href='http://fonts.googleapis.com/css?family=Asap:400,700' rel='stylesheet' type='text/css'>
	
	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="js/html5shiv.js"></script>
        <script src="js/respond.min.js"></script>
    <![endif]-->
	<link rel="stylesheet" href="css/search-box.css" type="text/css">
	<style>
		.post img{
			height: 360px;
			width: 100%;
		}
        .checked {
            border-color: cornflowerblue;
        }
        .unchecked {

        }
	</style>
	
</head>

 <body>
<header>

	<!-- /////////////////////////////////////////Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <h1 class="navbar-brand page-scroll">
					<a href="#page-top">OpenHouse</a>
				</h1>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li>
                        <a class="page-scroll" href="index.html">Home</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="products.html">Product</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="projects.html">Project</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="productManage.html">background</a>
                    </li>
					<li>
						<a class="page-scroll" href="about.html">About</a>
					</li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
	<!-- Navigation 已经删除-->
	<!--<div class="box-shadow">

	</div>-->
</header>

	
	<!-- /////////////////////////////////////////Content -->
	<div id="page-content">
		
		<!-- ////////////Content Box -->
		<section class="box-content box-style-1">
		
			<div class="container">
				<div class="row heading">
					 <div class="col-lg-12">	
	                    <h2>OUR GALLERY</h2>
	                    <hr class="line02">
                    	<div class="intro">Lorem ipsum dolor sit amet</div>
					    <div class="search">
							<div class="search-content">
								<input type="search" id="searchContent" placeholder="search" >
							</div>
							<div class="search-button">
								<input type="button" id="searchButton" value="搜索" onclick="search()">
							</div>
					 	</div>
					 </div>
				</div>
				<div>
					<input type="button" value="Default" id="order-by-default" class="checked">
					<input type="button" value="Date↓" id="order-by-date" class="unchecked">
				</div>
                <br>
				<div class="row" id="projects">

				</div>
				<br>
				<div id="pageInfo">

                </div>
			</div>
		</section>
		
	</div>
	
	<!-- FOOTER -->
	<footer>
		<div class="wrap-footer">
			<div class="container">
				<div class="row"> 
					<div class="col-footer col-md-4">
						<h2 class="footer-title">About Us</h2>
						<div class="textwidget">Aenean feugiat in ante et blandit. Vestibulum posuere molestie risus, ac interdum magna porta non. Pellentesque rutrum fringilla elementum. Curabitur tincidunt porta lorem vitae accumsan. <br> <br> 
						Aenean feugiat in ante et blandit. Vestibulum posuere molestie risus, ac interdum magna porta non. Pellentesque rutrum fringilla elementum. Curabitur tincidunt porta lorem vitae accumsan.</div>
					</div> 
					<div class="col-footer col-md-4 widget_recent_entries">
						<h2 class="footer-title">Recent Posts</h2>
						<ul>
							<li><a href="#">MOST VISITED COUNTRIES</a></li>
							<li><a href="#">5 PLACES THAT MAKE A GREAT HOLIDAY</a></li>
							<li><a href="#">PEBBLE TIME STEEL IS ON TRACK TO SHIP IN JULY</a></li>
							<li><a href="#">STARTUP COMPANY&#8217;S CO-FOUNDER TALKS ON HIS NEW PRODUCT</a></li>
						</ul>
					</div>
					<div class="col-footer col-md-4">
						<h2 class="footer-title">NEWS LETTER</h2>
						If you want to receive our latest news send directly to your email, please leave your email address bellow. Subscription is free and you can cancel anytime.
						<div>
							<input type="text" name="your-name" id="email" value="" size="40" placeholder="Your Email" required/>
							<input type="submit" value="SUBSCRIBE" class="btn btn-3" onclick="subscribe()"/>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="bottom-footer">
			<div class="container">
				<div class="row">
					<div class="col-md-4">
						<p>Copyright 20xx - More Templates <a href="http://www.cssmoban.com/" target="_blank" title="模板之家">模板之家</a> - Collect from <a href="http://www.cssmoban.com/" title="网页模板" target="_blank">网页模板</a></p>
					</div>
					<div class="col-md-4">
						<ul class="list-inline social-buttons">
							<li><a href="#"><i class="fa fa-twitter"></i></a>
							</li>
							<li><a href="#"><i class="fa fa-facebook"></i></a>
							</li>
							<li><a href="#"><i class="fa fa-linkedin"></i></a>
							</li>
							<li><a href="#"><i class="fa fa-pinterest"></i></a>
							</li>
						</ul>
					</div>
					<div class="col-md-4">
						<ul class="list-inline quicklinks">
							<li><a href="#">Privacy Policy</a>
							</li>
							<li><a href="#">Terms of Use</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</footer>
  
	<!-- jQuery -->
	<script type="text/javascript" src="js/jquery-2.1.1.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	
	<!-- Custom Theme JavaScript -->
	<script src="js/agency.js"></script>

	<!-- Plugin JavaScript -->
	<script src="js/jquery.easing.min.js"></script>
	<script src="js/classie.js"></script>
	<script src="js/cbpAnimatedHeader.js"></script>
	
	<script src="js/lightbox-plus-jquery.min.js"></script>
	<!--引进自己写的一些js-->
	<script type="text/javascript" src="mine-js/until.js"></script>

 	<script>
        //页码
        var currentPage = 1;
        //下一页
        function next(){
            //字符串转变成整数型
            currentPage = parseInt( $("#currentPage").text() );
            currentPage = currentPage+1;
            if (document.getElementById("order-by-date").className == "checked"){
                getProjectBySort();
                return;
            }
            if (document.getElementById("order-by-default").className == "checked"){
                getProjects();
                return;
            }
        }
        //上一页
        function back(){
            currentPage = $("#currentPage").text();
            currentPage = currentPage-1;
            if (document.getElementById("order-by-date").className == "checked"){
                getProjectBySort();
                return;
            }
            if (document.getElementById("order-by-default").className == "checked"){
                getProjects();
                return;
            }
        }
        //跳页码
        function transfer(e){
            currentPage = parseInt( $(e).text() );
            if (document.getElementById("order-by-date").className == "checked"){
                getProjectBySort();
                return;
            }
            if (document.getElementById("order-by-default").className == "checked"){
                getProjects();
                return;
            }
        }
        //获取全部project并展示
		window.onload = getProjects;
		function  getProjects() {
            $.ajax({
                url: "/project/foreground/projects?pageSize=8&currentPage="+currentPage,
                type: "get",
                //发送的数据
                data: "",
                contentType: "application/json;charset=UTF-8",
                dataType: "json",
                success: function (data) {
                	//通过获取到的数据把project内容输出到html
                    setProjects(data);
                }
            })
        }
		//project排序
		var ProjectSort = {
            DATE_ASC : 1 ,
			DATE_DESC :2 ,
		}
		//project默认排序
		document.getElementById("order-by-default").addEventListener("click", function () {
            //按钮变成选择状态
            document.getElementById("order-by-date").className = "unchecked";
            document.getElementById("order-by-default").className = "checked";
            //从第一页开始
            currentPage = 1;
			getProjects();
		})
		//project按日期排序
        var keyword;//排序关键字
		document.getElementById("order-by-date").addEventListener("click", function () {
		    //按钮变成选择状态
            document.getElementById("order-by-date").className = "checked";
            document.getElementById("order-by-default").className = "unchecked";
			//获取点击前的排序
			var sortType = $("#order-by-date").val();
			//如果目前是升序，则点击后改成降序
			if (sortType == "Date↑"){
				keyword = ProjectSort.DATE_DESC;
				$("#order-by-date").val("Date↓");
			} else if (sortType == "Date↓"){ //如果是降序则点击后改成升序
				keyword = ProjectSort.DATE_ASC;
				$("#order-by-date").val("Date↑");
			} else {
				return;
			}
            //从第一页开始
            currentPage = 1;
			getProjectBySort();
		})
        //通过排序方式获取产品
        function getProjectBySort(){
            $.ajax({
                url: "/project/foreground/projects/sort/"+keyword+"?pageSize=8&currentPage="+currentPage,
                type: "get",
                //发送的数据
                data: '',
                contentType: "application/json;charset=UTF-8",
                dataType: "json",
                success: function (data) {
                    setProjects(data);
                }
            })
        }
	</script>
    <!--tool-->
    <script>
		//通过获取到的project数据渲染内容并把内容输出到html
		function setProjects(data) {
			var projectContent = "";
			for (var i =0 ;i<data.data.list.length;i++){
				projectContent+=
						'<div class="post" style="background: #fff;">'+
							'<div class="col-lg-6" style="padding: 0;">'+
								'<img src="'+data.data.list[i].img+'"/>'+
							'</div>'+
							'<div class="col-lg-6">'+
								'<div class="t-center" style="padding: 70px 0;">'+
									'<h3>'+data.data.list[i].title+'</h3>'+
									'<p>'+data.data.list[i].description+'</p>'+
									'<a class="btn btn-skin" href="project.html?id='+data.data.list[i].id+'">Read More</a>'+
								'</div>'+
							'</div>'+
						'</div>';
			}
			$("#projects").html(projectContent);
			var pageInfo = "";
			//不是第一页的时才显示上一页按钮
			if (data.data.pageNum!=1){
				pageInfo+="<button  name='back' id='back' onclick='back()'>上一页</button>"
			}
			for (var i=1 ;i<=data.data.pages;i++){
				//如果是当前页码的话，颜色变蓝
				if(i==data.data.pageNum){
					pageInfo+="<button id='currentPage' style='background-color: #007bff'>"+i+"</button>";
				}
				else{
					pageInfo+="<button  onclick='transfer(this)'>"+i+"</button>";
				}
			}
			//不是最后一页时才显示下一页按钮
			if (data.data.pageNum!=data.data.pages){
				pageInfo+="<button  name='next' id='next' onclick='next()'>下一页</button>";
			}
			$("#pageInfo").html(pageInfo);
		}
		//点击搜索
		$("#searchButton").click(function(){
			var searchText= jQuery.trim($("#searchContent").val());
			var searchUrl =encodeURI("SearchResult.html?searchText="+searchText);   //使用encodeURI编码
			window.location.href =searchUrl;
		});

    </script>
</body>
</html>